TGAIMAGE_PATH = ../tgaimage
TGAIMAGE_INCLUDEPATH = $(TGAIMAGE_PATH)/include
TGAIMAGE_OBJECT = $(TGAIMAGE_PATH)/obj/tgaimage.o
TGAIMAGE_DEPS = $(TGAIMAGE_OBJECT) $(TGAIMAGE_PATH)/include/tgaimage/tgaimage.h $(TGAIMAGE_PATH)/Makefile

WAVEFRONT_PATH = ../wavefront
WAVEFRONT_INCLUDEPATH = $(WAVEFRONT_PATH)/include
WAVEFRONT_OBJECT = $(WAVEFRONT_PATH)/obj/wavefront.o
WAVEFRONT_DEPS = $(WAVEFRONT_OBJECT) $(WAVEFRONT_PATH)/include/wavefront/wavefront.hpp $(WAVEFRONT_PATH)/Makefile

TINYRENDERER_PATH = ../tinyrenderer
TINYRENDERER_INCLUDEPATH = $(TINYRENDERER_PATH)/include
TINYRENDERER_OBJECT = $(TINYRENDERER_PATH)/obj/line.o
TINYRENDERER_DEPS = $(TINYRENDERER_OBJECT) $(TINYRENDERER_PATH)/include/tinyrenderer/line.hpp $(TINYRENDERER_PATH)/Makefile

all: lesson1 wireframe

lesson1: src/lesson1.cpp $(TGAIMAGE_DEPS) $(TINYRENDERER_DEPS) src/TGAColors.hpp
	g++ $< $(TGAIMAGE_OBJECT) $(TINYRENDERER_OBJECT) -I $(TGAIMAGE_INCLUDEPATH) -I $(TINYRENDERER_INCLUDEPATH) -pg -o $@

wireframe: src/wireframe.cpp $(WAVEFRONT_DEPS) $(TGAIMAGE_DEPS) $(TINYRENDERER_DEPS) src/TGAColors.hpp
	g++ $< $(TGAIMAGE_OBJECT) $(TINYRENDERER_OBJECT) $(WAVEFRONT_OBJECT) -I $(TGAIMAGE_INCLUDEPATH) -I $(TINYRENDERER_INCLUDEPATH) -I $(WAVEFRONT_INCLUDEPATH) -pg -std=c++11 -g -o $@

$(TGAIMAGE_OBJECT): $(TGAIMAGE_DEPS)
	cd $(TGAIMAGE_PATH) && $(MAKE)

$(TINYRENDERER_OBJECT): $(TINYRENDERER_DEPS)
	cd $(TINYRENDERER_PATH) && $(MAKE)
	
$(WAVEFRONT_OBJECT): $(WAVEFRONT_DEPS)
	cd $(WAVEFRONT_PATH) && $(MAKE)
